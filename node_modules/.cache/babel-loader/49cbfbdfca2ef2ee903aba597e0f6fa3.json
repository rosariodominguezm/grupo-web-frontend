{"ast":null,"code":"import _defineProperty from \"/Users/rosariodominguezm/Desktop/Octavo Semestre/Tecnologi\\u0301as y aplicaciones web/grupo-grupo-web-1-frontend/simulador/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _readOnlyError from \"/Users/rosariodominguezm/Desktop/Octavo Semestre/Tecnologi\\u0301as y aplicaciones web/grupo-grupo-web-1-frontend/simulador/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/readOnlyError\";\nimport _objectSpread from \"/Users/rosariodominguezm/Desktop/Octavo Semestre/Tecnologi\\u0301as y aplicaciones web/grupo-grupo-web-1-frontend/simulador/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/rosariodominguezm/Desktop/Octavo Semestre/Tecnologi\\u0301as y aplicaciones web/grupo-grupo-web-1-frontend/simulador/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState } from \"react\";\nimport { emailValidator, passwordValidator } from \"../components/Validators.js\";\nvar touchErrors = function touchErrors(errors) {\n  return Object.entries(errors).reduce(function (acc, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      field = _ref2[0],\n      fieldError = _ref2[1];\n    acc[field] = _objectSpread({}, fieldError, {\n      dirty: true\n    });\n    return acc;\n  }, {});\n};\nexport var useLoginFormValidator = function useLoginFormValidator(form) {\n  var _useState = useState({\n      mail: {\n        dirty: false,\n        error: false,\n        message: \"\"\n      },\n      password: {\n        dirty: false,\n        error: false,\n        message: \"\"\n      }\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    errors = _useState2[0],\n    setErrors = _useState2[1];\n  var validateForm = function validateForm(_ref3) {\n    var form = _ref3.form,\n      field = _ref3.field,\n      errors = _ref3.errors,\n      _ref3$forceTouchError = _ref3.forceTouchErrors,\n      forceTouchErrors = _ref3$forceTouchError === void 0 ? false : _ref3$forceTouchError;\n    var isValid = true;\n\n    // Create a deep copy of the errors\n    var nextErrors = JSON.parse(JSON.stringify(errors));\n\n    // Force validate all the fields\n    if (forceTouchErrors) {\n      touchErrors(errors), _readOnlyError(\"nextErrors\");\n    }\n    var mail = form.mail,\n      password = form.password;\n    if (nextErrors.mail.dirty && (field ? field === \"mail\" : true)) {\n      var emailMessage = emailValidator(email, form);\n      nextErrors.email.error = !!mailMessage;\n      nextErrors.email.message = emailMessage;\n      if (!!emailMessage) isValid = false;\n    }\n    if (nextErrors.password.dirty && (field ? field === \"password\" : true)) {\n      var passwordMessage = passwordValidator(password, form);\n      nextErrors.password.error = !!passwordMessage;\n      nextErrors.password.message = passwordMessage;\n      if (!!passwordMessage) isValid = false;\n    }\n    setErrors(nextErrors);\n    return {\n      isValid: isValid,\n      errors: nextErrors\n    };\n  };\n  var onBlurField = function onBlurField(e) {\n    var field = e.target.name;\n    var fieldError = errors[field];\n    if (fieldError.dirty) return;\n    var updatedErrors = _objectSpread({}, errors, _defineProperty({}, field, _objectSpread({}, errors[field], {\n      dirty: true\n    })));\n    validateForm({\n      form: form,\n      field: field,\n      errors: updatedErrors\n    });\n  };\n  return {\n    validateForm: validateForm,\n    onBlurField: onBlurField,\n    errors: errors\n  };\n};","map":{"version":3,"names":["useState","emailValidator","passwordValidator","touchErrors","errors","Object","entries","reduce","acc","field","fieldError","dirty","useLoginFormValidator","form","mail","error","message","password","setErrors","validateForm","forceTouchErrors","isValid","nextErrors","JSON","parse","stringify","emailMessage","email","mailMessage","passwordMessage","onBlurField","e","target","name","updatedErrors"],"sources":["/Users/rosariodominguezm/Desktop/Octavo Semestre/Tecnologías y aplicaciones web/grupo-grupo-web-1-frontend/simulador/src/hooks/useLoginFormValidator.js"],"sourcesContent":["import { useState } from \"react\";\n\nimport {\n  emailValidator,\n  passwordValidator,\n} from \"../components/Validators.js\";\n\nconst touchErrors = errors => {\n  return Object.entries(errors).reduce((acc, [field, fieldError]) => {\n    acc[field] = {\n      ...fieldError,\n      dirty: true,\n    };\n    return acc;\n  }, {});\n};\n\nexport const useLoginFormValidator = form => {\n  const [errors, setErrors] = useState({\n    mail: {\n      dirty: false,\n      error: false,\n      message: \"\",\n    },\n    password: {\n      dirty: false,\n      error: false,\n      message: \"\",\n    },\n  });\n\n  const validateForm = ({ form, field, errors, forceTouchErrors = false }) => {\n    let isValid = true;\n\n    // Create a deep copy of the errors\n    const nextErrors = JSON.parse(JSON.stringify(errors));\n\n    // Force validate all the fields\n    if (forceTouchErrors) {\n      nextErrors = touchErrors(errors);\n    }\n\n    const { mail, password } = form;\n\n    if (nextErrors.mail.dirty && (field ? field === \"mail\" : true)) {\n      const emailMessage = emailValidator(email, form);\n      nextErrors.email.error = !!mailMessage;\n      nextErrors.email.message = emailMessage;\n      if (!!emailMessage) isValid = false;\n    }\n\n    if (nextErrors.password.dirty && (field ? field === \"password\" : true)) {\n      const passwordMessage = passwordValidator(password, form);\n      nextErrors.password.error = !!passwordMessage;\n      nextErrors.password.message = passwordMessage;\n      if (!!passwordMessage) isValid = false;\n    }\n\n    setErrors(nextErrors);\n\n    return {\n      isValid,\n      errors: nextErrors,\n    };\n  };\n\n  const onBlurField = e => {\n    const field = e.target.name;\n    const fieldError = errors[field];\n    if (fieldError.dirty) return;\n\n    const updatedErrors = {\n      ...errors,\n      [field]: {\n        ...errors[field],\n        dirty: true,\n      },\n    };\n\n    validateForm({ form, field, errors: updatedErrors });\n  };\n\n  return {\n    validateForm,\n    onBlurField,\n    errors,\n  };\n};\n\n \n\n "],"mappings":";;;;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAEhC,SACEC,cAAc,EACdC,iBAAiB,QACZ,6BAA6B;AAEpC,IAAMC,WAAW,GAAG,SAAdA,WAAW,CAAGC,MAAM,EAAI;EAC5B,OAAOC,MAAM,CAACC,OAAO,CAACF,MAAM,CAAC,CAACG,MAAM,CAAC,UAACC,GAAG,QAA0B;IAAA;MAAvBC,KAAK;MAAEC,UAAU;IAC3DF,GAAG,CAACC,KAAK,CAAC,qBACLC,UAAU;MACbC,KAAK,EAAE;IAAI,EACZ;IACD,OAAOH,GAAG;EACZ,CAAC,EAAE,CAAC,CAAC,CAAC;AACR,CAAC;AAED,OAAO,IAAMI,qBAAqB,GAAG,SAAxBA,qBAAqB,CAAGC,IAAI,EAAI;EAAA,gBACfb,QAAQ,CAAC;MACnCc,IAAI,EAAE;QACJH,KAAK,EAAE,KAAK;QACZI,KAAK,EAAE,KAAK;QACZC,OAAO,EAAE;MACX,CAAC;MACDC,QAAQ,EAAE;QACRN,KAAK,EAAE,KAAK;QACZI,KAAK,EAAE,KAAK;QACZC,OAAO,EAAE;MACX;IACF,CAAC,CAAC;IAAA;IAXKZ,MAAM;IAAEc,SAAS;EAaxB,IAAMC,YAAY,GAAG,SAAfA,YAAY,QAA0D;IAAA,IAApDN,IAAI,SAAJA,IAAI;MAAEJ,KAAK,SAALA,KAAK;MAAEL,MAAM,SAANA,MAAM;MAAA,8BAAEgB,gBAAgB;MAAhBA,gBAAgB,sCAAG,KAAK;IACnE,IAAIC,OAAO,GAAG,IAAI;;IAElB;IACA,IAAMC,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACrB,MAAM,CAAC,CAAC;;IAErD;IACA,IAAIgB,gBAAgB,EAAE;MACPjB,WAAW,CAACC,MAAM,CAAC;IAClC;IAAC,IAEOU,IAAI,GAAeD,IAAI,CAAvBC,IAAI;MAAEG,QAAQ,GAAKJ,IAAI,CAAjBI,QAAQ;IAEtB,IAAIK,UAAU,CAACR,IAAI,CAACH,KAAK,KAAKF,KAAK,GAAGA,KAAK,KAAK,MAAM,GAAG,IAAI,CAAC,EAAE;MAC9D,IAAMiB,YAAY,GAAGzB,cAAc,CAAC0B,KAAK,EAAEd,IAAI,CAAC;MAChDS,UAAU,CAACK,KAAK,CAACZ,KAAK,GAAG,CAAC,CAACa,WAAW;MACtCN,UAAU,CAACK,KAAK,CAACX,OAAO,GAAGU,YAAY;MACvC,IAAI,CAAC,CAACA,YAAY,EAAEL,OAAO,GAAG,KAAK;IACrC;IAEA,IAAIC,UAAU,CAACL,QAAQ,CAACN,KAAK,KAAKF,KAAK,GAAGA,KAAK,KAAK,UAAU,GAAG,IAAI,CAAC,EAAE;MACtE,IAAMoB,eAAe,GAAG3B,iBAAiB,CAACe,QAAQ,EAAEJ,IAAI,CAAC;MACzDS,UAAU,CAACL,QAAQ,CAACF,KAAK,GAAG,CAAC,CAACc,eAAe;MAC7CP,UAAU,CAACL,QAAQ,CAACD,OAAO,GAAGa,eAAe;MAC7C,IAAI,CAAC,CAACA,eAAe,EAAER,OAAO,GAAG,KAAK;IACxC;IAEAH,SAAS,CAACI,UAAU,CAAC;IAErB,OAAO;MACLD,OAAO,EAAPA,OAAO;MACPjB,MAAM,EAAEkB;IACV,CAAC;EACH,CAAC;EAED,IAAMQ,WAAW,GAAG,SAAdA,WAAW,CAAGC,CAAC,EAAI;IACvB,IAAMtB,KAAK,GAAGsB,CAAC,CAACC,MAAM,CAACC,IAAI;IAC3B,IAAMvB,UAAU,GAAGN,MAAM,CAACK,KAAK,CAAC;IAChC,IAAIC,UAAU,CAACC,KAAK,EAAE;IAEtB,IAAMuB,aAAa,qBACd9B,MAAM,sBACRK,KAAK,oBACDL,MAAM,CAACK,KAAK,CAAC;MAChBE,KAAK,EAAE;IAAI,IAEd;IAEDQ,YAAY,CAAC;MAAEN,IAAI,EAAJA,IAAI;MAAEJ,KAAK,EAALA,KAAK;MAAEL,MAAM,EAAE8B;IAAc,CAAC,CAAC;EACtD,CAAC;EAED,OAAO;IACLf,YAAY,EAAZA,YAAY;IACZW,WAAW,EAAXA,WAAW;IACX1B,MAAM,EAANA;EACF,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module"}